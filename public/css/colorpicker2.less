//LESSHAT properties
@import "../bower/lesshat/build/lesshat.less";

@w3c: true;
@webkit: true;
@moz: false;
@opera: false;
@ms: false;
@oldWebkit: false;

@color_sq_area_size: 120px;
@color_col_w: 20px;
@def_margin: 5px;
@opacity-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODk4MUJFQjE0RDAwMTFFMzlFQzFBMDYyQkFBRjhDNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODk4MUJFQjI0RDAwMTFFMzlFQzFBMDYyQkFBRjhDNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTgxQkVBRjREMDAxMUUzOUVDMUEwNjJCQUFGOEM0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OTgxQkVCMDREMDAxMUUzOUVDMUEwNjJCQUFGOEM0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq8N0cwAAAAoSURBVHjaYty+fTsDDHh4eMDZTAw4AOkSjP///4dzduzYQQs7AAIMACq4CDGfius/AAAAAElFTkSuQmCC');
@cp_border_color: #ECF0F1;
@cp_border_radius: 5px;
@cp_border_size: 1px;

@circle_radius: 5px;
@circle_border_size: 2px;
@circle_color: rgba(0, 0, 0, 0.8);
@selector_color: rgba(0, 0, 0, 0.8);

body.unselectable {
  .user-select(none);
}

.color-picker {
  .picker_window_style {
    position: absolute;
    background-color: white;
    border: @cp_border_size solid @cp_border_color;
    .border-radius(@cp_border_radius);
    .box-shadow(0 0 30px rgba(0, 0, 0, 0.2));
    //.transition(all .5s);
    .transform-origin(0, 0);
    .backface-visibility(visible);
    display: none;
    z-index: 9998;
  }
  .arrows() {
    @arrow_w: 3px;
    @arrow_h: 4px;
    .arr-r {
      border-top: @arrow_w solid transparent;
      border-bottom: @arrow_w solid transparent;
      border-right: @arrow_h solid @selector_color;
      position: absolute;
      top: -@arrow_h/2;
      right: -@arrow_w;
    }
    .arr-l {
      border-top: @arrow_w solid transparent;
      border-bottom: @arrow_w solid transparent;
      border-left: @arrow_h solid @selector_color;
      position: absolute;
      top: -@arrow_h/2;
      left: -@arrow_w;
    }
  }
  .selector() {
    position: absolute;
    width: @color_col_w;
    height: 1px;
    background-color: @selector_color;
    .box-sizing(border-box);
    pointer-events: none;
    .arrows();
  }
  //position: relative;
  input {
    float: left;
  }
  .picker {
    .picker_window_style;
    width: @color_sq_area_size+@color_col_w+3*@def_margin + 2*@cp_border_size;
    height: @color_sq_area_size+2*@def_margin+2*@cp_border_size;
    > div {
      height: @color_sq_area_size;
      margin-top: @def_margin;
      margin-left: @def_margin;
      float: left;
      &.map {
        position: relative;
        width: @color_sq_area_size;
        cursor: crosshair;
        .pointer {
          height: @circle_radius*2;
          width: @circle_radius*2;
          margin: -@circle_radius;
          border: @circle_border_size solid @circle_color;
          .border-radius(@circle_radius*2);
          .box-sizing(border-box);
          position: absolute;
          pointer-events: none;
        }
      }
      &.value {
        position: relative;
        width: @color_col_w;
        .background-image(linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1)));
        cursor: pointer;
        .selector {
          .selector();
        }
      }
    }
  }
  .op-picker {
    .picker_window_style;
    width: @color_col_w+2*@def_margin+2*@cp_border_size;
    height: @color_sq_area_size+2*@def_margin+2*@cp_border_size;
    > div {
      height: @color_sq_area_size;
      margin-top: @def_margin;
      margin-left: @def_margin;
      float: left;
      &.alpha {
        width: @color_col_w;
        background-image: @opacity-image;
        cursor: pointer;
        .alpha-gradient {
          position: relative;
          .size(100%);
          .selector {
            .selector();
          }
        }
      }
    }
  }
  .result-wrapper {
    float: left;
    .size(22px);
    background-image: @opacity-image;
    margin-top: 2px;
    cursor: pointer;
    .color-result {
      .size(100%);
    }
  }
  .vis {
    z-index: 9999;
    display: block;
    .transform-origin(50% 0%);
    .ShowCP;
    &.none {
      .HideCP;
    }
    &.upSideDown {
      .transform-origin(50% 100%);
    }
  }
}

//ANIMATION
.ShowCP {
  .animation(0.5s openAnim forwards);
}

.HideCP {
  .animation(0.5s closeAnim forwards);
}

.keyframes(~'flipInX, 0% {transform: perspective(400px) rotateX(90deg);opacity: 0;} 40% {transform: perspective(400px) rotateX(-10deg);} 70% {transform: perspective(400px) rotateX(10deg);} 100% {transform: perspective(400px) rotateX(0deg);opacity: 1;}');
.keyframes(~'flipOutX, 0% {transform: perspective(400px) rotateX(0deg);opacity: 1;} 100% { transform: perspective(400px) rotateX(90deg); opacity: 0;}');

.keyframes(~'openAnim, 0% {transform: rotateX(90deg);opacity: 0;} 100% {transform: rotateX(0deg);opacity: 1;}');
.keyframes(~'closeAnim, 0% {transform: rotateX(0deg);opacity: 1;} 100% {transform: rotateX(90deg);opacity: 0;}');